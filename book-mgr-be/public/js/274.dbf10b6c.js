"use strict";(self["webpackChunkbook_mgr_fe"]=self["webpackChunkbook_mgr_fe"]||[]).push([[274],{2274:function(a,e,t){t.r(e),t.d(e,{default:function(){return g}});var n=t(3396),u=t(7139);const s=(0,n._)("span",null," ",-1);function l(a,e,t,l,c,o){const d=(0,n.up)("a-input-number"),i=(0,n.up)("a-button"),r=(0,n.up)("a-divider"),m=(0,n.up)("a-table"),p=(0,n.up)("a-pagination"),v=(0,n.up)("flex-end"),g=(0,n.up)("a-card");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(d,{value:a.count,"onUpdate:value":e[0]||(e[0]=e=>a.count=e),min:1,max:1e4},null,8,["value"]),s,(0,n.Wm)(i,{type:"primary",onClick:a.add},{default:(0,n.w5)((()=>[(0,n.Uk)("添加")])),_:1},8,["onClick"])]),(0,n.Wm)(r),(0,n._)("div",null,[(0,n.Wm)(m,{bordered:"",columns:a.columns,"data-source":a.list,pagination:!1},{bodyCell:(0,n.w5)((({column:e,record:t})=>["status"===e.dataIndex?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)((0,u.zw)(t.user?"已使用":"未使用"),1)],64)):(0,n.kq)("",!0),"actions"===e.dataIndex?((0,n.wg)(),(0,n.j4)(i,{key:1,type:"danger",onClick:e=>a.remove(t),size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])):(0,n.kq)("",!0)])),_:1},8,["columns","data-source"])]),(0,n.Wm)(v,{style:{"margin-top":"24px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{current:a.curPage,"onUpdate:current":e[1]||(e[1]=e=>a.curPage=e),total:a.total,"page-size":10,onChange:a.setPage},null,8,["current","total","onChange"])])),_:1})])),_:1})])}var c=t(4870),o=t(1192),d=t(1731),i=t(6842);const r=[{title:"邀请码",dataIndex:"code"},{title:"使用状态",dataIndex:"status"},{title:"操作",dataIndex:"actions"}];var m=(0,n.aZ)({setup(){const a=(0,c.iH)(1),e=(0,c.iH)(1),t=(0,c.iH)([]),u=(0,c.iH)(0),s=async()=>{const a=await o.jQ.list(e.value,10);(0,d.q6)(a).success((({data:{list:a,total:e}})=>{t.value=a,u.value=e}))};(0,n.bv)((()=>{s()}));const l=a=>{e.value=a,s()},m=async()=>{const e=await o.jQ.add(a.value);(0,d.q6)(e).success((({msg:e})=>{i.ZP.success(`成功添加${a.value}条邀请码`),s()}))},p=async({_id:a})=>{const e=await o.jQ.remove(a);(0,d.q6)(e).success((({msg:a})=>{i.ZP.success(a),s()}))};return{count:a,list:t,total:u,curPage:e,columns:r,setPage:l,add:m,remove:p}}}),p=t(89);const v=(0,p.Z)(m,[["render",l]]);var g=v}}]);
//# sourceMappingURL=274.dbf10b6c.js.map