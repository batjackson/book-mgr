"use strict";(self["webpackChunkbook_mgr_fe"]=self["webpackChunkbook_mgr_fe"]||[]).push([[338],{7338:function(e,a,t){t.r(a),t.d(a,{default:function(){return L}});var l=t(3396),s=t(7139);const o=(0,l._)("span",null," ",-1),n={class:"base-info"},i={class:"items"},c={class:"item"},d=(0,l._)("div",{class:"title"},"价格",-1),u={class:"content"},r={class:"item"},p=(0,l._)("div",{class:"title"},"作者",-1),m={class:"content"},g={class:"item"},v=(0,l._)("div",{class:"title"},"分类",-1),_={class:"content"},w={class:"items"},k={class:"item"},f=(0,l._)("div",{class:"title"},"出版日期",-1),C={class:"content"},U={href:"javascript:;"},h={href:"javascript:;"},y=(0,l._)("div",null,null,-1);function b(e,a,t,b,T,z){const O=(0,l.up)("a-button"),W=(0,l.up)("space-between"),N=(0,l.up)("a-divider"),H=(0,l.up)("a-card"),j=(0,l.up)("CheckOutlined"),P=(0,l.up)("a-table"),q=(0,l.up)("a-pagination"),x=(0,l.up)("update"),I=(0,l.Q2)("only-admin");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l._)("h2",null,(0,s.zw)(e.d.name),1),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(O,{size:"small",type:"primary",onClick:a[0]||(a[0]=a=>e.showUpdateModal=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:1}),o,(0,l.Wm)(O,{size:"small",type:"danger",onClick:e.remove},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:1},8,["onClick"])])),[[I]])])),_:1}),(0,l.Wm)(N),(0,l._)("div",n,[(0,l._)("div",i,[(0,l._)("div",c,[d,(0,l._)("div",u,(0,s.zw)(e.d.price),1)]),(0,l._)("div",r,[p,(0,l._)("div",m,(0,s.zw)(e.d.author),1)]),(0,l._)("div",g,[v,(0,l._)("div",_,(0,s.zw)(e.d.classify),1)])]),(0,l._)("div",w,[(0,l._)("div",k,[f,(0,l._)("div",C,(0,s.zw)(e.formatTimeStamp(e.d.publishDate)),1)])])])])),_:1}),(0,l.Wm)(H,{class:"log",title:"出入库日志"},{extra:(0,l.w5)((()=>[(0,l._)("span",{style:{"margin-right":"12px"},onClick:a[1]||(a[1]=a=>e.logFilter("IN_COUNT"))},[(0,l._)("a",U,["IN_COUNT"===e.curLogType?((0,l.wg)(),(0,l.j4)(j,{key:0})):(0,l.kq)("",!0),(0,l.Uk)("入库日志 ")])]),(0,l._)("span",{onClick:a[2]||(a[2]=a=>e.logFilter("OUT_COUNT"))},[(0,l._)("a",h,["OUT_COUNT"===e.curLogType?((0,l.wg)(),(0,l.j4)(j,{key:0})):(0,l.kq)("",!0),(0,l.Uk)(" 出库日志 ")])])])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(P,{bordered:"",pagination:!1,"data-source":e.log,columns:e.columns},{bodyCell:(0,l.w5)((({column:a,record:t})=>["createAt"===a.dataIndex?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,s.zw)(e.formatTimeStamp(t.meta.createdAt)),1)],64)):(0,l.kq)("",!0)])),_:1},8,["data-source","columns"])]),(0,l.Wm)(W,{style:{"margin-top":"24px"}},{default:(0,l.w5)((()=>[y,(0,l.Wm)(q,{current:e.logCurPage,"onUpdate:current":a[3]||(a[3]=a=>e.logCurPage=a),total:e.logTotal,"page-size":10,onChange:e.setLogPage},null,8,["current","total","onChange"])])),_:1})])),_:1}),(0,l.Wm)(x,{show:e.showUpdateModal,"onUpdate:show":a[4]||(a[4]=a=>e.showUpdateModal=a),book:e.d,onUpdate:e.update},null,8,["show","book","onUpdate"])])}var T=t(4870),z=t(2483),O=t(4500),W=t(1192),N=t(1731),H=t(2659),j=t(6842),P=t(2314);const q=[{title:"数量",dataIndex:"num"},{title:"操作时间",dataIndex:"createAt"}];var x=(0,l.aZ)({components:{SpaceBetween:O.Z,Update:P.Z,CheckOutlined:H.Z},setup(){const e=(0,z.yj)(),a=(0,z.tv)(),{id:t}=e.params,s=(0,T.iH)({}),o=(0,T.iH)([]),n=(0,T.iH)(!1),i=(0,T.iH)(0),c=(0,T.iH)(1),d=(0,T.iH)("IN_COUNT"),u=async()=>{const e=await W.s9.detail(t);(0,N.q6)(e).success((({data:e})=>{s.value=e}))},r=async()=>{const e=await W.zN.list(d.value,c.value,10);(0,N.q6)(e).success((({data:{list:e,total:a}})=>{o.value=e,i.value=a}))};(0,l.bv)((()=>{u(),r()}));const p=async()=>{const e=await W.s9.remove(t);(0,N.q6)(e).success((({msg:e})=>{j.ZP.success(e),a.replace("/books")}))},m=e=>{Object.assign(s.value,e)},g=e=>{c.value=e,r()},v=e=>{d.value=e,r()};return{d:s,formatTimeStamp:N.jH,remove:p,showUpdateModal:n,update:m,logTotal:i,logCurPage:c,setLogPage:g,columns:q,log:o,logFilter:v,curLogType:d,logCurPage:c}}}),I=t(89);const Z=(0,I.Z)(x,[["render",b]]);var L=Z}}]);
//# sourceMappingURL=338.57fbf67c.js.map