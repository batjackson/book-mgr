{"version":3,"file":"js/338.57fbf67c.js","mappings":"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","sources":["webpack://book-mgr-fe/./src/views/Books/BookDetail/index.vue","webpack://book-mgr-fe/./src/views/Books/BookDetail/index.js","webpack://book-mgr-fe/./src/views/Books/BookDetail/index.vue?8ccd"],"sourcesContent":["<template>\n  <div>\n    <a-card>\n      <space-between>\n        <h2>{{ d.name }}</h2>\n        <div v-only-admin>\n          <a-button size=\"small\" type=\"primary\" @click=\"showUpdateModal = true\">编辑</a-button>\n          <span>&nbsp;</span>\n          <a-button size=\"small\" type=\"danger\" @click=\"remove\">删除</a-button>\n        </div>\n      </space-between>\n\n      <a-divider />\n      <div class=\"base-info\">\n        <div class=\"items\">\n          <div class=\"item\">\n            <div class=\"title\">价格</div>\n            <div class=\"content\">{{ d.price }}</div>\n          </div>\n          <div class=\"item\">\n            <div class=\"title\">作者</div>\n            <div class=\"content\">{{ d.author }}</div>\n          </div>\n          <div class=\"item\">\n            <div class=\"title\">分类</div>\n            <div class=\"content\">{{ d.classify }}</div>\n          </div>\n        </div>\n        <div class=\"items\">\n          <div class=\"item\">\n            <div class=\"title\">出版日期</div>\n            <div class=\"content\">{{ formatTimeStamp(d.publishDate) }}</div>\n          </div>\n        </div>\n      </div>\n    </a-card>\n    <a-card class=\"log\" title=\"出入库日志\">\n      <template #extra>\n        <span style=\"margin-right: 12px\" @click=\"logFilter('IN_COUNT')\">\n          <a href=\"javascript:;\"\n            ><CheckOutlined v-if=\"curLogType === 'IN_COUNT'\"></CheckOutlined>入库日志\n          </a>\n        </span>\n        <span @click=\"logFilter('OUT_COUNT')\">\n          <a href=\"javascript:;\">\n            <CheckOutlined v-if=\"curLogType === 'OUT_COUNT'\"></CheckOutlined>\n            出库日志\n          </a>\n        </span>\n      </template>\n      <div>\n        <a-table bordered :pagination=\"false\" :data-source=\"log\" :columns=\"columns\">\n          <template v-slot:bodyCell=\"{ column, record }\">\n            <template v-if=\"column.dataIndex === 'createAt'\">\n              {{ formatTimeStamp(record.meta.createdAt) }}\n            </template>\n          </template>\n        </a-table>\n      </div>\n      <space-between style=\"margin-top: 24px\">\n        <div></div>\n        <a-pagination\n          v-model:current=\"logCurPage\"\n          :total=\"logTotal\"\n          :page-size=\"10\"\n          @change=\"setLogPage\"\n        ></a-pagination>\n      </space-between>\n    </a-card>\n    <update v-model:show=\"showUpdateModal\" :book=\"d\" @update=\"update\"></update>\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n\n<style lang=\"scss\">\n@import './index.scss';\n</style>\n","import { defineComponent, onMounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport SpaceBetween from '@/components/SpaceBetween';\nimport { book, inventoryLog } from '@/service';\nimport { result, formatTimeStamp } from '@/helpers/utils';\nimport { CheckOutlined } from '@ant-design/icons-vue';\nimport { message } from 'ant-design-vue';\nimport Update from '@/views/Books/Update/index.vue';\n\nconst columns = [\n  {\n    title: '数量',\n    dataIndex: 'num',\n  },\n  {\n    title: '操作时间',\n    dataIndex: 'createAt',\n  },\n];\n\nexport default defineComponent({\n  components: { SpaceBetween, Update, CheckOutlined },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const { id } = route.params;\n    const detailInfo = ref({});\n    const log = ref([]);\n    const showUpdateModal = ref(false);\n    const logTotal = ref(0);\n    const logCurPage = ref(1);\n    const curLogType = ref('IN_COUNT');\n    // 获取书籍详细信息\n    const getDetail = async () => {\n      const res = await book.detail(id);\n\n      result(res).success(({ data }) => {\n        detailInfo.value = data;\n      });\n    };\n    // 获取出入库日志\n    const getInventoryLog = async () => {\n      const res = await inventoryLog.list(curLogType.value, logCurPage.value, 10);\n\n      result(res).success(({ data: { list, total } }) => {\n        log.value = list;\n        logTotal.value = total;\n      });\n    };\n    onMounted(() => {\n      getDetail();\n      getInventoryLog();\n    });\n    // 删除操作\n    const remove = async () => {\n      const res = await book.remove(id);\n\n      result(res).success(({ msg }) => {\n        message.success(msg);\n        router.replace('/books');\n      });\n    };\n    // 更新操作\n    const update = (book) => {\n      Object.assign(detailInfo.value, book);\n    };\n    // 日志分页切换\n    const setLogPage = (page) => {\n      logCurPage.value = page;\n      getInventoryLog();\n    };\n    // 筛选日志\n    const logFilter = (type) => {\n      curLogType.value = type;\n\n      getInventoryLog();\n    };\n    return {\n      d: detailInfo,\n      formatTimeStamp,\n      remove,\n      showUpdateModal,\n      update,\n      logTotal,\n      logCurPage,\n      setLogPage,\n      columns,\n      log,\n      logFilter,\n      curLogType,\n      logCurPage,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=cebad07a\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=cebad07a&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Alvin\\\\Desktop\\\\图书管理系统\\\\book-mgr-fe\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","href","_createElementBlock","_createVNode","_component_a_card","_component_space_between","_ctx","name","_component_a_button","size","type","onClick","_hoisted_1","_component_a_divider","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","price","_hoisted_7","_hoisted_8","_hoisted_9","author","_hoisted_10","_hoisted_11","_hoisted_12","classify","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","publishDate","title","extra","style","_hoisted_17","_createBlock","_component_CheckOutlined","key","_hoisted_18","_component_a_table","bordered","pagination","columns","bodyCell","column","record","dataIndex","_Fragment","meta","createdAt","_hoisted_19","_component_a_pagination","current","total","onChange","_component_update","show","book","onUpdate","defineComponent","components","SpaceBetween","Update","CheckOutlined","setup","route","useRoute","router","useRouter","id","params","detailInfo","ref","log","showUpdateModal","logTotal","logCurPage","curLogType","getDetail","async","res","result","success","data","value","getInventoryLog","inventoryLog","list","onMounted","remove","msg","message","replace","update","Object","assign","setLogPage","page","logFilter","d","formatTimeStamp","__exports__","render"],"sourceRoot":""}